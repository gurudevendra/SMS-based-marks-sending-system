import RPi.GPIO as GPIO import time from sim800l import SIM800L 
import I2C_LCD_driver 
lcd = I2C_LCD_driver.I2C_LCD() 
# Define the button pin 
BUTTON_PIN = 18 # Change to your GPIO pin 
# Initialize GPIO 
GPIO.setmode(GPIO.BCM) 
GPIO.setup(BUTTON_PIN, GPIO.IN, pull_up_down=GPIO.PUD_UP) 
lcd.lcd_clear() lcd.lcd_string_at("Automatic Marks",0, 1) # Print on line 1 
lcd.lcd_string_at("Announcement Sys",0, 2) # Print on line 1 time.sleep(20) 
lcd.lcd_clear() lcd.lcd_string_at("Sim800L Init.....",0, 1) # Print on line 1 time.sleep(5) 
# Initialize SIM800L module sim800l = SIM800L("/dev/serial0") sim800l.setup() 
def send_sms(phone_number, message): lcd.lcd_clear() 
lcd.lcd_string_at("Sending SMS...",0, 1) # Print on line 1 
lcd.lcd_string_at("Ph:"+phone_number,0, 2) # Print on line 1 time.sleep(2) response = 
sim800l.send_sms(phone_number, message) lcd.lcd_clear() 
lcd.lcd_string_at("SMS_status:"+response,0, 1) # Print on line 1 print("SMS Status:", 
response) 
time.sleep(1) 
def read_marks_file(filename): students = [] with open(filename, "r") as file: 
line in file.readlines():  
data = line.strip().split(",")  
for 
if len(data) == 8: # Ensure 
correct format 
name, *marks, phone = data 
marks_text = " 
".join([f"{subject}: {mark}" for subject, mark in zip(["Math", 
"Science", "English", "History", "Geography", "Computer"], marks)]) 
message = f"{name}'s Marks: {marks_text}" 
message)) return students 
def send_marks(): 
students.append((phone, 
students_data = read_marks_file("marks.txt") for phone, message in students_data: 
print(phone) 
print("\n") 
print(message) 
send_sms(phone, message) 
time.sleep(1) # Delay between messages to avoid congestion 
48 
print("Waiting for button press...") 
try: 
while True: 
lcd.lcd_clear() 
lcd.lcd_string_at("Press Button to",0, 1) # Print on line 1 
lcd.lcd_string_at(" Send Marks ",0, 2) # Print on line 1 
GPIO.input(BUTTON_PIN) == GPIO.LOW: 
print("Button Pressed! Sending SMS...") 
send_marks() 
time.sleep(0.5) 
time.sleep(1) # Debounce delay 
except KeyboardInterrupt: 
print("Exiting...") 
GPIO.cleanup()
